#!/usr/bin/env php
<?php

if (is_file(__DIR__ . '/../../../autoload.php')) {
    require_once __DIR__ . '/../../../autoload.php';
} elseif (is_file(__DIR__ . '/../vendor/autoload.php')) {
    require_once __DIR__ . '/../vendor/autoload.php';
} elseif (isset($argv[3]) && is_file($argv[3])) {
    require_once $argv;
} else {
    throw new InvalidArgumentException('vendor/autoload.php is not found.');
}

if ($argc < 2) {
    throw new InvalidArgumentException('cakephp2 app dir required.');
}

$appDir = $argv[1];
$rootDir = isset($argv[2]) ? $argv[2] : __DIR__ . '/../../';

$generator = new \CakePhp2IdeHelper\Generator(realpath($rootDir), $appDir);

$generator->generate();
